clientCachable: true
responseExpiryDate: absolute,36000
↓Input_variables [steps.InputVariablesStep-1673013038503]: 
↓jSimpleSource [steps.SimpleSourceStep-1675178744595]: 
  sourceDefinition: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
      - com.twinsoft.convertigo.beans.common.XMLVector: 
        - java.lang.String: 
          - ↑value: 1673013038503
        - java.lang.String: 
          - ↑value: ./agg_function/text()
  variableName: agg_function_old
↓buildAggFunction [steps.SimpleStep-1673016100745]: 
  expression: |
    'if(agg_function == "year") {
    	agg_function = "YYYY"
    } else if(agg_function == "month") {
    	agg_function = "YYYY-MM"
    } else if(agg_function == "week") {
    	agg_function = "YYYY-WW"
    } else if(agg_function == "day") {
    	agg_function = "YYYY-MM-DD"
    }
    //log.warn(agg_function)'
↓buildCastStrings [steps.SimpleStep-1673013061619]: 
  expression: |
    'sites = JSON.parse(sites)
    var string = "";
    var sitesLength = sites.length
    //log.warn("sites length")
    //log.warn(sitesLength)
    for(var i = 0; i < sites.length; i++) {
    	string = string + "CAST(''"+sites[i]+"'' AS BIGINT)" + ((i != sites.length - 1) ? ", " : "")
    }
    
    log.warn(string)'
↓jElement [steps.ElementStep-1673013564546]: 
  expression: string
  nodeName: sites
  output: false
↓jIfThenElse_1 [steps.IfThenElseStep-1676474032056]: 
  condition: sitesLength == 0
  ↓jThen [steps.ThenStep-1676474033661]: 
    ↓Error_structure [steps.XMLErrorStep-1676474111097]: 
      message: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: Aucun site sélectionné
  ↓jElse [steps.ElseStep-1676474033663]: 
    ↓jSimpleSource_1 [steps.SimpleSourceStep-1673864409532]: 
      sourceDefinition: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
          - com.twinsoft.convertigo.beans.common.XMLVector: 
            - java.lang.String: 
              - ↑value: 1673013038503
            - java.lang.String: 
              - ↑value: ./synthese/text()
      variableName: synthese
    ↓Call_Transaction [steps.TransactionStep-1673012654154]: 
      sourceTransaction: poc_energisme.postgreSQL.widget_conso
      ↓date_start [variables.StepVariable-1673012725914]: 
        description: date_start
      ↓date_end [variables.StepVariable-1673012725916]: 
        description: date_end
      ↓sites [variables.StepVariable-1673012725918]: 
        sourceDefinition: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
            - com.twinsoft.convertigo.beans.common.XMLVector: 
              - java.lang.String: 
                - ↑value: 1673013564546
              - java.lang.String: 
                - ↑value: ./text()
      ↓agg_function [variables.StepVariable-1673012725920]: 
    ↓jSimpleSource_2 [steps.SimpleSourceStep-1674225853173]: 
      sourceDefinition: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
          - com.twinsoft.convertigo.beans.common.XMLVector: 
            - java.lang.String: 
              - ↑value: 1673012654154
            - java.lang.String: 
              - ↑value: ./document/sql_output
      variableName: length
    ↓jIfThenElse [steps.IfThenElseStep-1674225997399]: 
      condition: length.length == 0
      ↓jThen [steps.ThenStep-1674225997401]: 
        ↓Error_structure [steps.XMLErrorStep-1674225954481]: 
          message: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
              - SmartType: 
                - ↑mode: PLAIN
                - →→: Manque de donnée
        ↓ComputeDate [steps.SimpleStep-1674228736519]: 
          expression: |
            'String.prototype.replaceAll = function(search, replacement) {
                var target = this;
                return target.replace(new RegExp(search, ''g''), replacement);
            };
            
            date_start = date_start.replaceAll(''-'', ''/'')
            date_end = date_end.replaceAll(''-'', ''/'')
            var date = date_start + '' - '' + date_end;'
        ↓jElement_1 [steps.ElementStep-1674228736522]: 
          expression: date
          nodeName: date
        ↓Field [steps.JsonFieldStep-1674229705200]: 
          key: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
              - SmartType: 
                - ↑mode: PLAIN
                - →→: total
      ↓jElse [steps.ElseStep-1674225997403]: 
        ↓jSimpleSource [steps.SimpleSourceStep-1673020236601]: 
          output: true
          sourceDefinition: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
              - com.twinsoft.convertigo.beans.common.XMLVector: 
                - java.lang.String: 
                  - ↑value: 1673012654154
                - java.lang.String: 
                  - ↑value: ./document/sql_output/row[1]/agg_period/text()
          variableName: firstDate
        ↓getFirstYear [steps.SimpleStep-1673020265724]: 
          expression: |
            log.warn(firstDate)
            var firstYear = firstDate.substring(0, 4)
            log.warn('firstYear')
            log.warn(firstYear)
        ↓jIfThenElse [steps.IfThenElseStep-1675080573643]: 
          condition: sitesLength > 1
          isEnabled: false
          ↓jThen [steps.ThenStep-1675080573929]: 
            ↓Field [steps.JsonFieldStep-1675080592149]: 
              key: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: PLAIN
                    - →→: chartType
              value: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: PLAIN
                    - →→: bar
          ↓jElse [steps.ElseStep-1675080573931]: 
            ↓Field [steps.JsonFieldStep-1675080593751]: 
              key: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: PLAIN
                    - →→: chartType
              value: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: PLAIN
                    - →→: line
        ↓Field [steps.JsonFieldStep-1673271596130]: 
          key: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
              - SmartType: 
                - ↑mode: PLAIN
                - →→: chartType
          value: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
              - SmartType: 
                - ↑mode: PLAIN
                - →→: bar
        ↓Object_1 [steps.JsonObjectStep-1675079415984]: 
          key: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
              - SmartType: 
                - ↑mode: PLAIN
                - →→: chartOptions
          ↓Object [steps.JsonObjectStep-1675079415987]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: plugins
            ↓Object [steps.JsonObjectStep-1675079415990]: 
              key: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: PLAIN
                    - →→: legend
              ↓Field [steps.JsonFieldStep-1675079415993]: 
                key: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                    - SmartType: 
                      - ↑mode: PLAIN
                      - →→: position
                value: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                    - SmartType: 
                      - ↑mode: PLAIN
                      - →→: bottom
              ↓Field_1 [steps.JsonFieldStep-1675079415996]: 
                key: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                    - SmartType: 
                      - ↑mode: PLAIN
                      - →→: align
                value: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                    - SmartType: 
                      - ↑mode: PLAIN
                      - →→: center
          ↓Object_1 [steps.JsonObjectStep-1675079415999]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: scales
            ↓Object [steps.JsonObjectStep-1675079416002]: 
              key: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: PLAIN
                    - →→: x
              ↓Field [steps.JsonFieldStep-1675079416005]: 
                key: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                    - SmartType: 
                      - ↑mode: PLAIN
                      - →→: stacked
                value: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                    - SmartType: 
                      - ↑mode: PLAIN
                      - →→: true
            ↓Object1 [steps.JsonObjectStep-1675079416008]: 
              key: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: PLAIN
                    - →→: y
              ↓Field [steps.JsonFieldStep-1675079416011]: 
                key: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                    - SmartType: 
                      - ↑mode: PLAIN
                      - →→: stacked
                value: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                    - SmartType: 
                      - ↑mode: PLAIN
                      - →→: true
              ↓Field_1 [steps.JsonFieldStep-1675079416014]: 
                key: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                    - SmartType: 
                      - ↑mode: PLAIN
                      - →→: title
                value: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                    - SmartType: 
                      - ↑mode: PLAIN
                      - →→: MWh
          ↓Field [steps.JsonFieldStep-1675079416017]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: maintainAspectRatio
            type: bool
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: false
          ↓responsive [steps.JsonFieldStep-1675079416020]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: responsive
            type: bool
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: true
        ↓jIf [steps.IfStep-1673864434286]: 
          condition: synthese == 'global'
          ↓data [steps.JsonObjectStep-1673864462070]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: data
            ↓labels [steps.JsonArrayStep-1673864462073]: 
              key: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: PLAIN
                    - →→: labels
              ↓Iterator [steps.IteratorStep-1673864462076]: 
                sourceDefinition: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                    - com.twinsoft.convertigo.beans.common.XMLVector: 
                      - java.lang.String: 
                        - ↑value: 1673012654154
                      - java.lang.String: 
                        - ↑value: ./document/sql_output/row
                ↓jSimpleSource [steps.SimpleSourceStep-1673864462079]: 
                  sourceDefinition: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                      - com.twinsoft.convertigo.beans.common.XMLVector: 
                        - java.lang.String: 
                          - ↑value: 1673864462076
                        - java.lang.String: 
                          - ↑value: ./agg_period/text()
                  variableName: currentDate
                ↓getCurrentYear [steps.SimpleStep-1673864462082]: 
                  expression: |
                    var currentYear = currentDate.substring(0, 4)
                    //log.warn('labels')
                    //log.warn(currentYear)
                ↓jIf [steps.IfStep-1673864462085]: 
                  condition: currentYear == firstYear
                  ↓computeLabel [steps.SimpleStep-1675159014522]: 
                    expression: |
                      'var months = {
                      	"01": "Jan",
                      	"02": "Fév",
                      	"03": "Mars",
                      	"04": "Avril",
                      	"05": "Mai",
                      	"06": "Juin",
                      	"07": "Juillet",
                      	"08": "Aout",
                      	"09": "Sept",
                      	"10": "Oct",
                      	"11": "Nov",
                      	"12": "Dec"
                      }
                      
                      var label;
                      if(agg_function_old == "week") {
                      	label = "S" + currentDate.split(''-'')[1]
                      } else if(agg_function_old == "year") {
                      	label = ""
                      } else {
                      	label = months[currentDate.split(''-'')[1]]
                      }
                      '
                  ↓Field [steps.JsonFieldStep-1673864462088]: 
                    key: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                        - SmartType: 
                          - ↑mode: PLAIN
                          - →→: Field
                    value: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                        - SmartType: 
                          - ↑mode: JS
                          - →→: label
            ↓Array [steps.JsonArrayStep-1673864462091]: 
              key: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: PLAIN
                    - →→: datasets
              ↓Object [steps.JsonObjectStep-1673864462094]: 
                comment: Electricité année précédente
                ↓Field [steps.JsonFieldStep-1673864462097]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: label
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: JS
                        - →→: '''Electricité année précédente ('' + firstYear + '') (MWh)'''
                ↓Array [steps.JsonArrayStep-1673864462100]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: data
                  ↓Iterator [steps.IteratorStep-1673864462103]: 
                    sourceDefinition: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                        - com.twinsoft.convertigo.beans.common.XMLVector: 
                          - java.lang.String: 
                            - ↑value: 1673012654154
                          - java.lang.String: 
                            - ↑value: ./document/sql_output/row
                    ↓jSimpleSource [steps.SimpleSourceStep-1673864462106]: 
                      sourceDefinition: 
                        - xmlizable: 
                          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                          - com.twinsoft.convertigo.beans.common.XMLVector: 
                            - java.lang.String: 
                              - ↑value: 1673864462103
                            - java.lang.String: 
                              - ↑value: ./agg_period/text()
                      variableName: currentDate
                    ↓getCurrentYear [steps.SimpleStep-1673864462109]: 
                      expression: var currentYear = currentDate.substring(0, 4)
                    ↓jIf [steps.IfStep-1673864462112]: 
                      condition: currentYear == firstYear
                      ↓Field [steps.JsonFieldStep-1673864462115]: 
                        key: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: PLAIN
                              - →→: Field
                        value: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: SOURCE
                              - com.twinsoft.convertigo.beans.common.XMLVector: 
                                - java.lang.String: 
                                  - ↑value: 1673864462103
                                - java.lang.String: 
                                  - ↑value: ./sum_conso_elec/text()
                ↓Field_1 [steps.JsonFieldStep-1673864462118]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: stack
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: Stack 0
                ↓Field_2 [steps.JsonFieldStep-1673864462121]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: backgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(50, 193, 113, 0.5)
                ↓Field_3 [steps.JsonFieldStep-1673864462124]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBackgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(50, 193, 113, 0.5)
                ↓Field_4 [steps.JsonFieldStep-1673864462127]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: borderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(50, 193, 113, 0.5)
                ↓Field_5 [steps.JsonFieldStep-1673864462130]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBorderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(50, 193, 113, 0.5)
              ↓Object1 [steps.JsonObjectStep-1673864462133]: 
                comment: Gaz année précédente
                ↓Field [steps.JsonFieldStep-1673864462136]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: label
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: JS
                        - →→: '''Gaz année précédente ('' + firstYear + '') (MWh)'''
                ↓Array [steps.JsonArrayStep-1673864462139]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: data
                  ↓Iterator [steps.IteratorStep-1673864462142]: 
                    sourceDefinition: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                        - com.twinsoft.convertigo.beans.common.XMLVector: 
                          - java.lang.String: 
                            - ↑value: 1673012654154
                          - java.lang.String: 
                            - ↑value: ./document/sql_output/row
                    ↓jSimpleSource [steps.SimpleSourceStep-1673864462145]: 
                      sourceDefinition: 
                        - xmlizable: 
                          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                          - com.twinsoft.convertigo.beans.common.XMLVector: 
                            - java.lang.String: 
                              - ↑value: 1673864462142
                            - java.lang.String: 
                              - ↑value: ./agg_period/text()
                      variableName: currentDate
                    ↓getCurrentYear [steps.SimpleStep-1673864462148]: 
                      expression: var currentYear = currentDate.substring(0, 4)
                    ↓jIf [steps.IfStep-1673864462151]: 
                      condition: currentYear == firstYear
                      ↓Field [steps.JsonFieldStep-1673864462154]: 
                        key: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: PLAIN
                              - →→: Field
                        value: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: SOURCE
                              - com.twinsoft.convertigo.beans.common.XMLVector: 
                                - java.lang.String: 
                                  - ↑value: 1673864462142
                                - java.lang.String: 
                                  - ↑value: ./sum_conso_gaz/text()
                ↓Field_1 [steps.JsonFieldStep-1673864462157]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: stack
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: Stack 0
                ↓Field_2 [steps.JsonFieldStep-1673864462160]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: backgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(254, 169, 62, 0.5)
                ↓Field_3 [steps.JsonFieldStep-1673864462163]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBackgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(254, 169, 62, 0.5)
                ↓Field_4 [steps.JsonFieldStep-1673864462166]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: borderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(254, 169, 62, 0.5)
                ↓Field_5 [steps.JsonFieldStep-1673864462169]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBorderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(254, 169, 62, 0.5)
              ↓Object_1 [steps.JsonObjectStep-1673864462172]: 
                comment: Electricité
                ↓Field [steps.JsonFieldStep-1673864462175]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: label
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: JS
                        - →→: '''Electricité ('' + currentYear + '') (MWh)'''
                ↓Array [steps.JsonArrayStep-1673864462178]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: data
                  ↓Iterator [steps.IteratorStep-1673864462181]: 
                    sourceDefinition: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                        - com.twinsoft.convertigo.beans.common.XMLVector: 
                          - java.lang.String: 
                            - ↑value: 1673012654154
                          - java.lang.String: 
                            - ↑value: ./document/sql_output/row
                    ↓jSimpleSource [steps.SimpleSourceStep-1673864462184]: 
                      sourceDefinition: 
                        - xmlizable: 
                          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                          - com.twinsoft.convertigo.beans.common.XMLVector: 
                            - java.lang.String: 
                              - ↑value: 1673864462181
                            - java.lang.String: 
                              - ↑value: ./agg_period/text()
                      variableName: currentDate
                    ↓getCurrentYear [steps.SimpleStep-1673864462187]: 
                      expression: var currentYear = currentDate.substring(0, 4)
                    ↓jIf [steps.IfStep-1673864462190]: 
                      condition: currentYear != firstYear
                      ↓Field [steps.JsonFieldStep-1673864462193]: 
                        key: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: PLAIN
                              - →→: Field
                        value: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: SOURCE
                              - com.twinsoft.convertigo.beans.common.XMLVector: 
                                - java.lang.String: 
                                  - ↑value: 1673864462181
                                - java.lang.String: 
                                  - ↑value: ./sum_conso_elec/text()
                ↓Field_1 [steps.JsonFieldStep-1673864462196]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: stack
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: Stack 1
                ↓Field_2 [steps.JsonFieldStep-1673864462199]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: backgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(50, 193, 113)
                ↓Field_3 [steps.JsonFieldStep-1673864462202]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBackgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(50, 193, 113)
                ↓Field_4 [steps.JsonFieldStep-1673864462205]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: borderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(50, 193, 113)
                ↓Field_5 [steps.JsonFieldStep-1673864462208]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBorderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(50, 193, 113)
              ↓Object_2 [steps.JsonObjectStep-1673864462211]: 
                comment: Gaz
                ↓Field [steps.JsonFieldStep-1673864462214]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: label
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: JS
                        - →→: '''Gaz ('' + currentYear + '') (MWh)'''
                ↓Array [steps.JsonArrayStep-1673864462217]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: data
                  ↓Iterator [steps.IteratorStep-1673864462220]: 
                    sourceDefinition: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                        - com.twinsoft.convertigo.beans.common.XMLVector: 
                          - java.lang.String: 
                            - ↑value: 1673012654154
                          - java.lang.String: 
                            - ↑value: ./document/sql_output/row
                    ↓jSimpleSource [steps.SimpleSourceStep-1673864462223]: 
                      sourceDefinition: 
                        - xmlizable: 
                          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                          - com.twinsoft.convertigo.beans.common.XMLVector: 
                            - java.lang.String: 
                              - ↑value: 1673864462220
                            - java.lang.String: 
                              - ↑value: ./agg_period/text()
                      variableName: currentDate
                    ↓getCurrentYear [steps.SimpleStep-1673864462226]: 
                      expression: var currentYear = currentDate.substring(0, 4)
                    ↓jIf [steps.IfStep-1673864462229]: 
                      condition: currentYear != firstYear
                      ↓Field [steps.JsonFieldStep-1673864462232]: 
                        key: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: PLAIN
                              - →→: Field
                        value: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: SOURCE
                              - com.twinsoft.convertigo.beans.common.XMLVector: 
                                - java.lang.String: 
                                  - ↑value: 1673864462220
                                - java.lang.String: 
                                  - ↑value: ./sum_conso_gaz/text()
                ↓Field_1 [steps.JsonFieldStep-1673864462235]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: stack
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: Stack 1
                ↓Field_2 [steps.JsonFieldStep-1673864462238]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: backgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(254, 169, 62)
                ↓Field_3 [steps.JsonFieldStep-1673864462241]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBackgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(254, 169, 62)
                ↓Field_4 [steps.JsonFieldStep-1673864462244]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: borderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(254, 169, 62)
                ↓Field_5 [steps.JsonFieldStep-1673864462247]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBorderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(254, 169, 62)
        ↓jIf_1 [steps.IfStep-1673864662604]: 
          condition: synthese == 'elec'
          ↓data [steps.JsonObjectStep-1673864681023]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: data
            ↓labels [steps.JsonArrayStep-1673864681026]: 
              key: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: PLAIN
                    - →→: labels
              ↓Iterator [steps.IteratorStep-1673864681029]: 
                sourceDefinition: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                    - com.twinsoft.convertigo.beans.common.XMLVector: 
                      - java.lang.String: 
                        - ↑value: 1673012654154
                      - java.lang.String: 
                        - ↑value: ./document/sql_output/row
                ↓jSimpleSource [steps.SimpleSourceStep-1673864681032]: 
                  sourceDefinition: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                      - com.twinsoft.convertigo.beans.common.XMLVector: 
                        - java.lang.String: 
                          - ↑value: 1673864681029
                        - java.lang.String: 
                          - ↑value: ./agg_period/text()
                  variableName: currentDate
                ↓getCurrentYear [steps.SimpleStep-1673864681035]: 
                  expression: |
                    var currentYear = currentDate.substring(0, 4)
                    log.warn('labels')
                    log.warn(currentYear)
                ↓jIf [steps.IfStep-1673864681038]: 
                  condition: currentYear == firstYear
                  ↓computeLabel [steps.SimpleStep-1675179261685]: 
                    expression: |
                      'var months = {
                      	"01": "Jan",
                      	"02": "Fév",
                      	"03": "Mars",
                      	"04": "Avril",
                      	"05": "Mai",
                      	"06": "Juin",
                      	"07": "Juillet",
                      	"08": "Aout",
                      	"09": "Sept",
                      	"10": "Oct",
                      	"11": "Nov",
                      	"12": "Dec"
                      }
                      
                      var label;
                      if(agg_function_old == "week") {
                      	label = "S" + currentDate.split(''-'')[1]
                      } else if(agg_function_old == "year") {
                      	label = ""
                      } else {
                      	label = months[currentDate.split(''-'')[1]]
                      }
                      '
                  ↓Field [steps.JsonFieldStep-1673864681041]: 
                    key: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                        - SmartType: 
                          - ↑mode: PLAIN
                          - →→: Field
                    value: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                        - SmartType: 
                          - ↑mode: JS
                          - →→: label
            ↓Array [steps.JsonArrayStep-1673864681044]: 
              key: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: PLAIN
                    - →→: datasets
              ↓Object [steps.JsonObjectStep-1673864681047]: 
                comment: Electricité année précédente
                ↓Field [steps.JsonFieldStep-1673864681050]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: label
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: JS
                        - →→: '''Electricité année précédente ('' + firstYear + '') (MWh)'''
                ↓Array [steps.JsonArrayStep-1673864681053]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: data
                  ↓Iterator [steps.IteratorStep-1673864681056]: 
                    sourceDefinition: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                        - com.twinsoft.convertigo.beans.common.XMLVector: 
                          - java.lang.String: 
                            - ↑value: 1673012654154
                          - java.lang.String: 
                            - ↑value: ./document/sql_output/row
                    ↓jSimpleSource [steps.SimpleSourceStep-1673864681059]: 
                      sourceDefinition: 
                        - xmlizable: 
                          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                          - com.twinsoft.convertigo.beans.common.XMLVector: 
                            - java.lang.String: 
                              - ↑value: 1673864681056
                            - java.lang.String: 
                              - ↑value: ./agg_period/text()
                      variableName: currentDate
                    ↓getCurrentYear [steps.SimpleStep-1673864681062]: 
                      expression: var currentYear = currentDate.substring(0, 4)
                    ↓jIf [steps.IfStep-1673864681065]: 
                      condition: currentYear == firstYear
                      ↓Field [steps.JsonFieldStep-1673864681068]: 
                        key: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: PLAIN
                              - →→: Field
                        value: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: SOURCE
                              - com.twinsoft.convertigo.beans.common.XMLVector: 
                                - java.lang.String: 
                                  - ↑value: 1673864681056
                                - java.lang.String: 
                                  - ↑value: ./sum_conso_elec/text()
                ↓Field_1 [steps.JsonFieldStep-1673864681071]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: stack
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: Stack 0
                ↓Field_2 [steps.JsonFieldStep-1673864681074]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: backgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(50, 193, 113, 0.5)
                ↓Field_3 [steps.JsonFieldStep-1673864681077]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBackgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(50, 193, 113, 0.5)
                ↓Field_4 [steps.JsonFieldStep-1673864681080]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: borderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(50, 193, 113, 0.5)
                ↓Field_5 [steps.JsonFieldStep-1673864681083]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBorderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(50, 193, 113, 0.5)
              ↓Object_1 [steps.JsonObjectStep-1673864681125]: 
                comment: Electricité
                ↓Field [steps.JsonFieldStep-1673864681128]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: label
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: JS
                        - →→: '''Electricité ('' + currentYear + '') (MWh)'''
                ↓Array [steps.JsonArrayStep-1673864681131]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: data
                  ↓Iterator [steps.IteratorStep-1673864681134]: 
                    sourceDefinition: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                        - com.twinsoft.convertigo.beans.common.XMLVector: 
                          - java.lang.String: 
                            - ↑value: 1673012654154
                          - java.lang.String: 
                            - ↑value: ./document/sql_output/row
                    ↓jSimpleSource [steps.SimpleSourceStep-1673864681137]: 
                      sourceDefinition: 
                        - xmlizable: 
                          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                          - com.twinsoft.convertigo.beans.common.XMLVector: 
                            - java.lang.String: 
                              - ↑value: 1673864681134
                            - java.lang.String: 
                              - ↑value: ./agg_period/text()
                      variableName: currentDate
                    ↓getCurrentYear [steps.SimpleStep-1673864681140]: 
                      expression: var currentYear = currentDate.substring(0, 4)
                    ↓jIf [steps.IfStep-1673864681143]: 
                      condition: currentYear != firstYear
                      ↓Field [steps.JsonFieldStep-1673864681146]: 
                        key: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: PLAIN
                              - →→: Field
                        value: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: SOURCE
                              - com.twinsoft.convertigo.beans.common.XMLVector: 
                                - java.lang.String: 
                                  - ↑value: 1673864681134
                                - java.lang.String: 
                                  - ↑value: ./sum_conso_elec/text()
                ↓Field_1 [steps.JsonFieldStep-1673864681149]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: stack
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: Stack 1
                ↓Field_2 [steps.JsonFieldStep-1673864681152]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: backgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(50, 193, 113)
                ↓Field_3 [steps.JsonFieldStep-1673864681155]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBackgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(50, 193, 113)
                ↓Field_4 [steps.JsonFieldStep-1673864681158]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: borderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(50, 193, 113)
                ↓Field_5 [steps.JsonFieldStep-1673864681161]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBorderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(50, 193, 113)
        ↓jIf_2 [steps.IfStep-1673864825857]: 
          condition: synthese == 'gaz'
          ↓data [steps.JsonObjectStep-1675079415798]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: data
            ↓labels [steps.JsonArrayStep-1675079415801]: 
              key: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: PLAIN
                    - →→: labels
              ↓Iterator [steps.IteratorStep-1675079415804]: 
                sourceDefinition: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                    - com.twinsoft.convertigo.beans.common.XMLVector: 
                      - java.lang.String: 
                        - ↑value: 1673012654154
                      - java.lang.String: 
                        - ↑value: ./document/sql_output/row
                ↓jSimpleSource [steps.SimpleSourceStep-1675079415807]: 
                  sourceDefinition: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                      - com.twinsoft.convertigo.beans.common.XMLVector: 
                        - java.lang.String: 
                          - ↑value: 1675079415804
                        - java.lang.String: 
                          - ↑value: ./agg_period/text()
                  variableName: currentDate
                ↓getCurrentYear [steps.SimpleStep-1675079415810]: 
                  expression: |
                    var currentYear = currentDate.substring(0, 4)
                    log.warn('labels')
                    log.warn(currentYear)
                ↓jIf [steps.IfStep-1675079415813]: 
                  condition: currentYear == firstYear
                  ↓computeLabel [steps.SimpleStep-1675179417222]: 
                    expression: |
                      'var months = {
                      	"01": "Jan",
                      	"02": "Fév",
                      	"03": "Mars",
                      	"04": "Avril",
                      	"05": "Mai",
                      	"06": "Juin",
                      	"07": "Juillet",
                      	"08": "Aout",
                      	"09": "Sept",
                      	"10": "Oct",
                      	"11": "Nov",
                      	"12": "Dec"
                      }
                      
                      var label;
                      if(agg_function_old == "week") {
                      	label = "S" + currentDate.split(''-'')[1]
                      } else if(agg_function_old == "year") {
                      	label = ""
                      } else {
                      	label = months[currentDate.split(''-'')[1]]
                      }
                      '
                  ↓Field [steps.JsonFieldStep-1675079415816]: 
                    key: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                        - SmartType: 
                          - ↑mode: PLAIN
                          - →→: Field
                    value: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                        - SmartType: 
                          - ↑mode: JS
                          - →→: label
            ↓Array [steps.JsonArrayStep-1675079415819]: 
              key: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: PLAIN
                    - →→: datasets
              ↓Object1 [steps.JsonObjectStep-1675079415861]: 
                comment: Gaz (année précédente) (MWh)
                ↓Field [steps.JsonFieldStep-1675079415864]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: label
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: JS
                        - →→: '''Gaz année précédente ('' + firstYear +  '') (MWh)'''
                ↓Array [steps.JsonArrayStep-1675079415867]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: data
                  ↓Iterator [steps.IteratorStep-1675079415870]: 
                    sourceDefinition: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                        - com.twinsoft.convertigo.beans.common.XMLVector: 
                          - java.lang.String: 
                            - ↑value: 1673012654154
                          - java.lang.String: 
                            - ↑value: ./document/sql_output/row
                    ↓jSimpleSource [steps.SimpleSourceStep-1675079415873]: 
                      sourceDefinition: 
                        - xmlizable: 
                          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                          - com.twinsoft.convertigo.beans.common.XMLVector: 
                            - java.lang.String: 
                              - ↑value: 1675079415870
                            - java.lang.String: 
                              - ↑value: ./agg_period/text()
                      variableName: currentDate
                    ↓getCurrentYear [steps.SimpleStep-1675079415876]: 
                      expression: var currentYear = currentDate.substring(0, 4)
                    ↓jIf [steps.IfStep-1675079415879]: 
                      condition: currentYear == firstYear
                      ↓Field [steps.JsonFieldStep-1675079415882]: 
                        key: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: PLAIN
                              - →→: Field
                        value: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: SOURCE
                              - com.twinsoft.convertigo.beans.common.XMLVector: 
                                - java.lang.String: 
                                  - ↑value: 1675079415870
                                - java.lang.String: 
                                  - ↑value: ./sum_conso_gaz/text()
                ↓Field_1 [steps.JsonFieldStep-1675079415885]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: stack
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: Stack 0
                ↓Field_2 [steps.JsonFieldStep-1675079415888]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: backgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(254, 169, 62, 0.5)
                ↓Field_3 [steps.JsonFieldStep-1675079415891]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBackgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(254, 169, 62, 0.5)
                ↓Field_4 [steps.JsonFieldStep-1675079415894]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: borderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(254, 169, 62, 0.5)
                ↓Field_5 [steps.JsonFieldStep-1675079415897]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBorderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgba(254, 169, 62, 0.5)
              ↓Object_2 [steps.JsonObjectStep-1675079415939]: 
                comment: Gaz (MWh)
                ↓Field [steps.JsonFieldStep-1675079415942]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: label
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: JS
                        - →→: '''Gaz ('' + currentYear + '') (MWh)'''
                ↓Array [steps.JsonArrayStep-1675079415945]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: data
                  ↓Iterator [steps.IteratorStep-1675079415948]: 
                    sourceDefinition: 
                      - xmlizable: 
                        - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                        - com.twinsoft.convertigo.beans.common.XMLVector: 
                          - java.lang.String: 
                            - ↑value: 1673012654154
                          - java.lang.String: 
                            - ↑value: ./document/sql_output/row
                    ↓jSimpleSource [steps.SimpleSourceStep-1675079415951]: 
                      sourceDefinition: 
                        - xmlizable: 
                          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                          - com.twinsoft.convertigo.beans.common.XMLVector: 
                            - java.lang.String: 
                              - ↑value: 1675079415948
                            - java.lang.String: 
                              - ↑value: ./agg_period/text()
                      variableName: currentDate
                    ↓getCurrentYear [steps.SimpleStep-1675079415954]: 
                      expression: var currentYear = currentDate.substring(0, 4)
                    ↓jIf [steps.IfStep-1675079415957]: 
                      condition: currentYear != firstYear
                      ↓Field [steps.JsonFieldStep-1675079415960]: 
                        key: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: PLAIN
                              - →→: Field
                        value: 
                          - xmlizable: 
                            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                            - SmartType: 
                              - ↑mode: SOURCE
                              - com.twinsoft.convertigo.beans.common.XMLVector: 
                                - java.lang.String: 
                                  - ↑value: 1675079415948
                                - java.lang.String: 
                                  - ↑value: ./sum_conso_gaz/text()
                ↓Field_1 [steps.JsonFieldStep-1675079415969]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: stack
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: Stack 1
                ↓Field_2 [steps.JsonFieldStep-1675079415972]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: backgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(254, 169, 62)
                ↓Field_3 [steps.JsonFieldStep-1675079415975]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBackgroundColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(254, 169, 62)
                ↓Field_4 [steps.JsonFieldStep-1675079415978]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: borderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(254, 169, 62)
                ↓Field_5 [steps.JsonFieldStep-1675079415981]: 
                  key: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: hoverBorderColor
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: PLAIN
                        - →→: rgb(254, 169, 62)
        ↓ComputeDate [steps.SimpleStep-1676474866717]: 
          expression: |
            'String.prototype.replaceAll = function(search, replacement) {
                var target = this;
                return target.replace(new RegExp(search, ''g''), replacement);
            };
            
            date_start = date_start.replaceAll(''-'', ''/'')
            date_end = date_end.replaceAll(''-'', ''/'')
            var date = date_start + '' - '' + date_end;
            '
        ↓jElement_1 [steps.ElementStep-1676474866720]: 
          expression: date
          nodeName: date
        ↓total [steps.JsonFieldStep-1676485489719]: 
          key: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
              - SmartType: 
                - ↑mode: PLAIN
                - →→: total
↓date_start [variables.RequestableVariable-1673012727418]: 
  description: date_start
↓date_end [variables.RequestableVariable-1673012727420]: 
  description: date_end
↓sites [variables.RequestableVariable-1673012727422]: 
↓agg_function [variables.RequestableVariable-1673012727424]: 
↓synthese [variables.RequestableVariable-1673864397326]: 
↓error [core.TestCase]: 
  ↓date_start [variables.TestCaseVariable-1674224092512]: 
    description: date_start
    value: 2022-01-20
  ↓date_end [variables.TestCaseVariable-1674224092514]: 
    description: date_end
    value: 2022-12-31
  ↓sites [variables.TestCaseVariable-1674224092516]: 
    value: '[]'
  ↓agg_function [variables.TestCaseVariable-1674224092518]: 
    value: month
  ↓synthese [variables.TestCaseVariable-1674224092520]: 
    value: global
↓error2 [core.TestCase]: 
  ↓date_start [variables.TestCaseVariable-1675094407514]: 
    description: date_start
    value: 2022-01-30
  ↓date_end [variables.TestCaseVariable-1675094407516]: 
    description: date_end
    value: 2023-01-30
  ↓sites [variables.TestCaseVariable-1675094407518]: 
    value: '["7639","7642","7632","7633","7634","7635","7636","7637","7731","7634","7639","7654","7655","7656"]'
  ↓agg_function [variables.TestCaseVariable-1675094407520]: 
    value: month
  ↓synthese [variables.TestCaseVariable-1675094407522]: 
    value: global
↓monositeElecDaily [core.TestCase]: 
  ↓date_start [variables.TestCaseVariable-1675073026040]: 
    description: date_start
    value: 2022-01-24
  ↓date_end [variables.TestCaseVariable-1675073026043]: 
    description: date_end
    value: 2023-01-24
  ↓sites [variables.TestCaseVariable-1675073026046]: 
    value: '[7626]'
  ↓agg_function [variables.TestCaseVariable-1675073026049]: 
    value: day
  ↓synthese [variables.TestCaseVariable-1675073026052]: 
    value: elec
↓monositeGaz [core.TestCase]: 
  ↓date_start [variables.TestCaseVariable-1674566660313]: 
    description: date_start
    value: 2022-01-30
  ↓date_end [variables.TestCaseVariable-1674566660315]: 
    description: date_end
    value: 2023-01-30
  ↓sites [variables.TestCaseVariable-1674566660317]: 
    value: '[7626]'
  ↓agg_function [variables.TestCaseVariable-1674566660319]: 
    value: month
  ↓synthese [variables.TestCaseVariable-1674566660321]: 
    value: gaz
↓monositeGlobalDaily [core.TestCase]: 
  ↓date_start [variables.TestCaseVariable-1674573271406]: 
    description: date_start
    value: 2022-01-24
  ↓date_end [variables.TestCaseVariable-1674573271409]: 
    description: date_end
    value: 2023-01-24
  ↓sites [variables.TestCaseVariable-1674573271412]: 
    value: '[7626]'
  ↓agg_function [variables.TestCaseVariable-1674573271415]: 
    value: day
  ↓synthese [variables.TestCaseVariable-1674573271418]: 
    value: global
↓multisiteElec [core.TestCase]: 
  ↓date_start [variables.TestCaseVariable-1673864691345]: 
    description: date_start
    value: 2021-01-01
  ↓date_end [variables.TestCaseVariable-1673864691348]: 
    description: date_end
    value: 2022-12-01
  ↓sites [variables.TestCaseVariable-1673864691351]: 
    value: '[7991, 7626]'
  ↓agg_function [variables.TestCaseVariable-1673864691354]: 
    value: month
  ↓synthese [variables.TestCaseVariable-1673864691357]: 
    value: elec
↓multisiteElecMonth [core.TestCase]: 
  ↓date_start [variables.TestCaseVariable-1675680825160]: 
    description: date_start
    value: 2022-02-06
  ↓date_end [variables.TestCaseVariable-1675680825163]: 
    description: date_end
    value: 2023-02-06
  ↓sites [variables.TestCaseVariable-1675680825166]: 
    value: '[7632,7634,7635,7636,7637,7638,7731]'
  ↓agg_function [variables.TestCaseVariable-1675680825169]: 
    value: month
  ↓synthese [variables.TestCaseVariable-1675680825172]: 
    value: elec
↓multisiteGaz [core.TestCase]: 
  ↓date_start [variables.TestCaseVariable-1673864831973]: 
    description: date_start
    value: 2021-01-01
  ↓date_end [variables.TestCaseVariable-1673864831976]: 
    description: date_end
    value: 2022-12-01
  ↓sites [variables.TestCaseVariable-1673864831979]: 
    value: '[7991, 7626]'
  ↓agg_function [variables.TestCaseVariable-1673864831982]: 
    value: month
  ↓synthese [variables.TestCaseVariable-1673864831985]: 
    value: gaz
↓multisiteGlobal [core.TestCase]: 
  ↓date_start [variables.TestCaseVariable-1673012731999]: 
    description: date_start
    value: 2021-01-01
  ↓date_end [variables.TestCaseVariable-1673012732001]: 
    description: date_end
    value: 2022-12-01
  ↓sites [variables.TestCaseVariable-1673012732003]: 
    value: '[7991, 7626]'
  ↓agg_function [variables.TestCaseVariable-1673012732005]: 
    value: month
  ↓synthese [variables.TestCaseVariable-1673864503643]: 
    value: global
↓multisiteGlobalWeek [core.TestCase]: 
  ↓date_start [variables.TestCaseVariable-1675178522670]: 
    description: date_start
    value: 2021-01-01
  ↓date_end [variables.TestCaseVariable-1675178522673]: 
    description: date_end
    value: 2022-12-01
  ↓sites [variables.TestCaseVariable-1675178522676]: 
    value: '[7991, 7626]'
  ↓agg_function [variables.TestCaseVariable-1675178522679]: 
    value: week
  ↓synthese [variables.TestCaseVariable-1675178522682]: 
    value: global