responseExpiryDate: daily,23:00:00
↓Input_variables [steps.InputVariablesStep-1673271074779]: 
↓buildAggFunction [steps.SimpleStep-1673271074782]: 
  expression: |
    'var agg_function_str = "date_part(''year'', rd.ts)"
    if(agg_function == "year") {
    	agg_function = agg_function_str;
    } else if(agg_function == "month") {
    	agg_function = agg_function_str + " || ''_'' || date_part(''month'', rd.ts)"
    } else if(agg_function == "week") {
    	agg_function = agg_function_str + " || ''_'' || date_part(''week'', rd.ts)"
    }
    
    log.warn(agg_function)'
↓buildCastStrings [steps.SimpleStep-1673271074785]: 
  expression: |
    'sites = JSON.parse(sites)
    var string = "";
    for(var i = 0; i < sites.length; i++) {
    	string = string + "CAST(''"+sites[i]+"'' AS BIGINT)" + ((i != sites.length - 1) ? ", " : "")
    }
    
    log.warn(string)'
↓jElement [steps.ElementStep-1673271074788]: 
  expression: string
  nodeName: sites
  output: false
↓Call_Transaction [steps.TransactionStep-1673271074791]: 
  sourceTransaction: poc_energisme.postgreSQL.widget_conso
  ↓date_start [variables.StepVariable-1673271074794]: 
    description: date_start
  ↓date_end [variables.StepVariable-1673271074797]: 
    description: date_end
  ↓sites [variables.StepVariable-1673271074800]: 
  ↓agg_function [variables.StepVariable-1673271074803]: 
↓jSimpleSource [steps.SimpleSourceStep-1673271074806]: 
  sourceDefinition: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
      - com.twinsoft.convertigo.beans.common.XMLVector: 
        - java.lang.String: 
          - ↑value: 1673271074791
        - java.lang.String: 
          - ↑value: ./document/sql_output/row[1]/agg_period/text()
  variableName: firstDate
↓getFirstYear [steps.SimpleStep-1673271074809]: 
  expression: |
    var firstYear = firstDate.substring(0, 4)
    log.warn('firstYear')
    log.warn(firstYear)
↓Field [steps.JsonFieldStep-1673271075049]: 
  key: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
      - SmartType: 
        - ↑mode: PLAIN
        - →→: chartType
  value: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
      - SmartType: 
        - ↑mode: PLAIN
        - →→: gauge
↓jIfThenElse [steps.IfThenElseStep-1673271074812]: 
  condition: chartType == "bar"
  isEnabled: false
  ↓jThen [steps.ThenStep-1673271074815]: 
    ↓Field [steps.JsonFieldStep-1673271074818]: 
      key: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: chartType
      value: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: SOURCE
            - com.twinsoft.convertigo.beans.common.XMLVector: 
              - java.lang.String: 
                - ↑value: 1673013038503
              - java.lang.String: 
                - ↑value: ./chartType/text()
    ↓data [steps.JsonObjectStep-1673271074821]: 
      key: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: data
      ↓labels [steps.JsonArrayStep-1673271074824]: 
        key: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
            - SmartType: 
              - ↑mode: PLAIN
              - →→: labels
        ↓Iterator [steps.IteratorStep-1673271074827]: 
          sourceDefinition: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
              - com.twinsoft.convertigo.beans.common.XMLVector: 
                - java.lang.String: 
                  - ↑value: 1673271074791
                - java.lang.String: 
                  - ↑value: ./document/sql_output/row
          ↓jSimpleSource [steps.SimpleSourceStep-1673271074830]: 
            sourceDefinition: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                - com.twinsoft.convertigo.beans.common.XMLVector: 
                  - java.lang.String: 
                    - ↑value: 1673271074827
                  - java.lang.String: 
                    - ↑value: ./agg_period/text()
            variableName: currentDate
          ↓getCurrentYear [steps.SimpleStep-1673271074833]: 
            expression: |
              var currentYear = currentDate.substring(0, 4)
              log.warn('labels')
              log.warn(currentYear)
          ↓jIf [steps.IfStep-1673271074836]: 
            condition: currentYear == firstYear
            ↓Field [steps.JsonFieldStep-1673271074839]: 
              value: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                  - SmartType: 
                    - ↑mode: SOURCE
                    - com.twinsoft.convertigo.beans.common.XMLVector: 
                      - java.lang.String: 
                        - ↑value: 1673020376655
                      - java.lang.String: 
                        - ↑value: ./agg_period/text()
      ↓Array [steps.JsonArrayStep-1673271074842]: 
        key: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
            - SmartType: 
              - ↑mode: PLAIN
              - →→: datasets
        ↓Object [steps.JsonObjectStep-1673271074845]: 
          comment: Electricité année précédente
          ↓Field [steps.JsonFieldStep-1673271074848]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: label
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: Electricité (année précédente)
          ↓Array [steps.JsonArrayStep-1673271074851]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: data
            ↓Iterator [steps.IteratorStep-1673271074854]: 
              sourceDefinition: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                  - com.twinsoft.convertigo.beans.common.XMLVector: 
                    - java.lang.String: 
                      - ↑value: 1673271074791
                    - java.lang.String: 
                      - ↑value: ./document/sql_output/row
              ↓jSimpleSource [steps.SimpleSourceStep-1673271074857]: 
                sourceDefinition: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                    - com.twinsoft.convertigo.beans.common.XMLVector: 
                      - java.lang.String: 
                        - ↑value: 1673271074854
                      - java.lang.String: 
                        - ↑value: ./agg_period/text()
                variableName: currentDate
              ↓getCurrentYear [steps.SimpleStep-1673271074860]: 
                expression: var currentYear = currentDate.substring(0, 4)
              ↓jIf [steps.IfStep-1673271074863]: 
                condition: currentYear == firstYear
                ↓Field [steps.JsonFieldStep-1673271074866]: 
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: SOURCE
                        - com.twinsoft.convertigo.beans.common.XMLVector: 
                          - java.lang.String: 
                            - ↑value: 1673020477582
                          - java.lang.String: 
                            - ↑value: ./sum_conso_elec/text()
          ↓Field_1 [steps.JsonFieldStep-1673271074869]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: stack
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: Stack 0
          ↓Field_2 [steps.JsonFieldStep-1673271074872]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: backgroundColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgba(50, 193, 113, 0.5)
          ↓Field_3 [steps.JsonFieldStep-1673271074875]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: hoverBackgroundColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgba(50, 193, 113, 0.5)
          ↓Field_4 [steps.JsonFieldStep-1673271074878]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: borderColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgba(50, 193, 113, 0.5)
          ↓Field_5 [steps.JsonFieldStep-1673271074881]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: hoverBorderColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgba(50, 193, 113, 0.5)
        ↓Object1 [steps.JsonObjectStep-1673271074884]: 
          comment: Gaz année précédente
          ↓Field [steps.JsonFieldStep-1673271074887]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: label
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: Gaz (année précédente)
          ↓Array [steps.JsonArrayStep-1673271074890]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: data
            ↓Iterator [steps.IteratorStep-1673271074893]: 
              sourceDefinition: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                  - com.twinsoft.convertigo.beans.common.XMLVector: 
                    - java.lang.String: 
                      - ↑value: 1673271074791
                    - java.lang.String: 
                      - ↑value: ./document/sql_output/row
              ↓jSimpleSource [steps.SimpleSourceStep-1673271074896]: 
                sourceDefinition: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                    - com.twinsoft.convertigo.beans.common.XMLVector: 
                      - java.lang.String: 
                        - ↑value: 1673271074893
                      - java.lang.String: 
                        - ↑value: ./agg_period/text()
                variableName: currentDate
              ↓getCurrentYear [steps.SimpleStep-1673271074899]: 
                expression: var currentYear = currentDate.substring(0, 4)
              ↓jIf [steps.IfStep-1673271074902]: 
                condition: currentYear == firstYear
                ↓Field [steps.JsonFieldStep-1673271074905]: 
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: SOURCE
                        - com.twinsoft.convertigo.beans.common.XMLVector: 
                          - java.lang.String: 
                            - ↑value: 1673020477621
                          - java.lang.String: 
                            - ↑value: ./sum_conso_gaz/text()
          ↓Field_1 [steps.JsonFieldStep-1673271074908]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: stack
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: Stack 0
          ↓Field_2 [steps.JsonFieldStep-1673271074911]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: backgroundColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgba(254, 169, 62, 0.5)
          ↓Field_3 [steps.JsonFieldStep-1673271074914]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: hoverBackgroundColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgba(254, 169, 62, 0.5)
          ↓Field_4 [steps.JsonFieldStep-1673271074917]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: borderColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgba(254, 169, 62, 0.5)
          ↓Field_5 [steps.JsonFieldStep-1673271074920]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: hoverBorderColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgba(254, 169, 62, 0.5)
        ↓Object_1 [steps.JsonObjectStep-1673271074923]: 
          comment: Electricité
          ↓Field [steps.JsonFieldStep-1673271074926]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: label
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: Electricité
          ↓Array [steps.JsonArrayStep-1673271074929]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: data
            ↓Iterator [steps.IteratorStep-1673271074932]: 
              sourceDefinition: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                  - com.twinsoft.convertigo.beans.common.XMLVector: 
                    - java.lang.String: 
                      - ↑value: 1673271074791
                    - java.lang.String: 
                      - ↑value: ./document/sql_output/row
              ↓jSimpleSource [steps.SimpleSourceStep-1673271074935]: 
                sourceDefinition: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                    - com.twinsoft.convertigo.beans.common.XMLVector: 
                      - java.lang.String: 
                        - ↑value: 1673271074932
                      - java.lang.String: 
                        - ↑value: ./agg_period/text()
                variableName: currentDate
              ↓getCurrentYear [steps.SimpleStep-1673271074938]: 
                expression: var currentYear = currentDate.substring(0, 4)
              ↓jIf [steps.IfStep-1673271074941]: 
                condition: currentYear != firstYear
                ↓Field [steps.JsonFieldStep-1673271074944]: 
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: SOURCE
                        - com.twinsoft.convertigo.beans.common.XMLVector: 
                          - java.lang.String: 
                            - ↑value: 1673020477660
                          - java.lang.String: 
                            - ↑value: ./sum_conso_elec/text()
          ↓Field_1 [steps.JsonFieldStep-1673271074947]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: stack
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: Stack 1
          ↓Field_2 [steps.JsonFieldStep-1673271074950]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: backgroundColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgb(50, 193, 113)
          ↓Field_3 [steps.JsonFieldStep-1673271074953]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: hoverBackgroundColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgb(50, 193, 113)
          ↓Field_4 [steps.JsonFieldStep-1673271074956]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: borderColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgb(50, 193, 113)
          ↓Field_5 [steps.JsonFieldStep-1673271074959]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: hoverBorderColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgb(50, 193, 113)
        ↓Object_2 [steps.JsonObjectStep-1673271074962]: 
          comment: Gaz
          ↓Field [steps.JsonFieldStep-1673271074965]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: label
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: Gaz
          ↓Array [steps.JsonArrayStep-1673271074968]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: data
            ↓Iterator [steps.IteratorStep-1673271074971]: 
              sourceDefinition: 
                - xmlizable: 
                  - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                  - com.twinsoft.convertigo.beans.common.XMLVector: 
                    - java.lang.String: 
                      - ↑value: 1673271074791
                    - java.lang.String: 
                      - ↑value: ./document/sql_output/row
              ↓jSimpleSource [steps.SimpleSourceStep-1673271074974]: 
                sourceDefinition: 
                  - xmlizable: 
                    - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
                    - com.twinsoft.convertigo.beans.common.XMLVector: 
                      - java.lang.String: 
                        - ↑value: 1673271074971
                      - java.lang.String: 
                        - ↑value: ./agg_period/text()
                variableName: currentDate
              ↓getCurrentYear [steps.SimpleStep-1673271074977]: 
                expression: var currentYear = currentDate.substring(0, 4)
              ↓jIf [steps.IfStep-1673271074980]: 
                condition: currentYear != firstYear
                ↓Field [steps.JsonFieldStep-1673271074983]: 
                  value: 
                    - xmlizable: 
                      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                      - SmartType: 
                        - ↑mode: SOURCE
                        - com.twinsoft.convertigo.beans.common.XMLVector: 
                          - java.lang.String: 
                            - ↑value: 1673020477699
                          - java.lang.String: 
                            - ↑value: ./sum_conso_gaz/text()
          ↓Field_1 [steps.JsonFieldStep-1673271074986]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: stack
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: Stack 1
          ↓Field_2 [steps.JsonFieldStep-1673271074989]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: backgroundColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgb(254, 169, 62)
          ↓Field_3 [steps.JsonFieldStep-1673271074992]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: hoverBackgroundColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgb(254, 169, 62)
          ↓Field_4 [steps.JsonFieldStep-1673271074995]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: borderColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgb(254, 169, 62)
          ↓Field_5 [steps.JsonFieldStep-1673271074998]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: hoverBorderColor
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: rgb(254, 169, 62)
    ↓Object_1 [steps.JsonObjectStep-1673271075001]: 
      key: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: chartOptions
      ↓Object [steps.JsonObjectStep-1673271075004]: 
        key: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
            - SmartType: 
              - ↑mode: PLAIN
              - →→: plugins
        ↓Object [steps.JsonObjectStep-1673271075007]: 
          key: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
              - SmartType: 
                - ↑mode: PLAIN
                - →→: legend
          ↓Field [steps.JsonFieldStep-1673271075010]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: position
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: bottom
          ↓Field_1 [steps.JsonFieldStep-1673271075013]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: align
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: center
      ↓Object_1 [steps.JsonObjectStep-1673271075016]: 
        key: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
            - SmartType: 
              - ↑mode: PLAIN
              - →→: scales
        ↓Object [steps.JsonObjectStep-1673271075019]: 
          key: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
              - SmartType: 
                - ↑mode: PLAIN
                - →→: x
          ↓Field [steps.JsonFieldStep-1673271075022]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: stacked
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: true
        ↓Object1 [steps.JsonObjectStep-1673271075025]: 
          key: 
            - xmlizable: 
              - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
              - SmartType: 
                - ↑mode: PLAIN
                - →→: y
          ↓Field [steps.JsonFieldStep-1673271075028]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: stacked
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: true
          ↓Field_1 [steps.JsonFieldStep-1673271075031]: 
            key: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: title
            value: 
              - xmlizable: 
                - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
                - SmartType: 
                  - ↑mode: PLAIN
                  - →→: MWh
      ↓Field [steps.JsonFieldStep-1673271075034]: 
        key: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
            - SmartType: 
              - ↑mode: PLAIN
              - →→: maintainAspectRatio
        type: bool
        value: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
            - SmartType: 
              - ↑mode: PLAIN
              - →→: false
      ↓responsive [steps.JsonFieldStep-1673271075037]: 
        key: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
            - SmartType: 
              - ↑mode: PLAIN
              - →→: responsive
        type: bool
        value: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
            - SmartType: 
              - ↑mode: PLAIN
              - →→: true
    ↓calculTotalAndComputeDate [steps.SimpleStep-1673271075040]: 
      expression: |
        'String.prototype.replaceAll = function(search, replacement) {
            var target = this;
            return target.replace(new RegExp(search, ''g''), replacement);
        };
        
        date_start = date_start.replaceAll(''-'', ''/'')
        date_end = date_end.replaceAll(''-'', ''/'')
        var date = date_start + '' - '' + date_end;'
    ↓jElement_1 [steps.ElementStep-1673271075043]: 
      expression: date
      nodeName: date
  ↓jElse [steps.ElseStep-1673271075046]: 
↓initTotals [steps.SimpleStep-1673271075052]: 
  expression: |
    var conso_total_current_year = 0;
    var conso_total_last_year = 0;
↓Iterator [steps.IteratorStep-1673271075055]: 
  sourceDefinition: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
      - com.twinsoft.convertigo.beans.common.XMLVector: 
        - java.lang.String: 
          - ↑value: 1673271074791
        - java.lang.String: 
          - ↑value: ./document/sql_output/row
  ↓jSimpleSource [steps.SimpleSourceStep-1673271075058]: 
    sourceDefinition: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
        - com.twinsoft.convertigo.beans.common.XMLVector: 
          - java.lang.String: 
            - ↑value: 1673271075055
          - java.lang.String: 
            - ↑value: ./agg_period/text()
    variableName: currentDate
  ↓getCurrentYear [steps.SimpleStep-1673271075061]: 
    expression: |
      var currentYear = currentDate.substring(0, 4)
      log.warn('labels')
      log.warn(currentYear)
  ↓jIfThenElse [steps.IfThenElseStep-1673271075064]: 
    condition: currentYear == firstYear
    ↓jThen [steps.ThenStep-1673271075067]: 
      ↓jSimpleSource [steps.SimpleSourceStep-1673271075070]: 
        sourceDefinition: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
            - com.twinsoft.convertigo.beans.common.XMLVector: 
              - java.lang.String: 
                - ↑value: 1673271075055
              - java.lang.String: 
                - ↑value: ./sum_conso_elec/text()
        variableName: conso
      ↓addTotal [steps.SimpleStep-1673271075073]: 
        expression: |
          conso_total_current_year = conso_total_current_year + parseInt(conso);
          log.warn(conso_total_current_year)
    ↓jElse [steps.ElseStep-1673271075076]: 
      ↓jSimpleSource [steps.SimpleSourceStep-1673271075079]: 
        sourceDefinition: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
            - com.twinsoft.convertigo.beans.common.XMLVector: 
              - java.lang.String: 
                - ↑value: 1673271075055
              - java.lang.String: 
                - ↑value: ./sum_conso_elec/text()
        variableName: conso
      ↓addTotal [steps.SimpleStep-1673271075082]: 
        expression: |
          conso_total_last_year = conso_total_last_year + parseInt(conso);
          log.warn("lastyear total")
          log.warn(conso_total_last_year)
↓calculAugmentation [steps.SimpleStep-1673271075085]: 
  expression: |
    var augmentation = Math.round( ((conso_total_current_year - conso_total_last_year) / conso_total_last_year * 100) * 100) / 100
    log.warn("augmentation")
    log.warn(augmentation)
↓needleValue [steps.JsonFieldStep-1673271075088]: 
  key: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
      - SmartType: 
        - ↑mode: PLAIN
        - →→: needleValue
  value: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
      - SmartType: 
        - ↑mode: JS
        - →→: augmentation
↓computeBottomLabel [steps.SimpleStep-1673271075091]: 
  expression: |
    'augmentation = ""+augmentation
    log.warn(''aug'')
    log.warn(augmentation)
    if(augmentation.indexOf(''-'') != - 1 ) {
    	var splt = augmentation.split(",");
    	log.warn("splt")
    	log.warn(splt)
    	augmentation = "-" + splt[0] + "%"
    } else {
    	augmentation = "+ " + augmentation + "%"
    }'
↓bottomLabel [steps.JsonFieldStep-1673271075094]: 
  key: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
      - SmartType: 
        - ↑mode: PLAIN
        - →→: bottomLabel
  value: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
      - SmartType: 
        - ↑mode: JS
        - →→: augmentation
↓options [steps.JsonObjectStep-1673271075097]: 
  key: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
      - SmartType: 
        - ↑mode: PLAIN
        - →→: options
  ↓hasNeeldle [steps.JsonFieldStep-1673271075100]: 
    key: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
        - SmartType: 
          - ↑mode: PLAIN
          - →→: hasNeedle
    type: bool
    value: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
        - SmartType: 
          - ↑mode: PLAIN
          - →→: true
  ↓needleColor [steps.JsonFieldStep-1673271075103]: 
    key: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
        - SmartType: 
          - ↑mode: PLAIN
          - →→: needleColor
    value: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
        - SmartType: 
          - ↑mode: PLAIN
          - →→: lightgrey
  ↓hasNeeldle2 [steps.JsonFieldStep-1673271075106]: 
    key: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
        - SmartType: 
          - ↑mode: PLAIN
          - →→: needleUpdateSpeed
    type: number
    value: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
        - SmartType: 
          - ↑mode: PLAIN
          - →→: 1000
  ↓arcColors [steps.JsonArrayStep-1673271075109]: 
    key: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
        - SmartType: 
          - ↑mode: PLAIN
          - →→: arcColors
    ↓Field [steps.JsonFieldStep-1673271075112]: 
      value: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: rgb(6, 89, 55)
    ↓Field1 [steps.JsonFieldStep-1673271075115]: 
      value: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: rgb(15, 170, 108)
    ↓Field2 [steps.JsonFieldStep-1673271075118]: 
      value: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: rgb(139, 207, 39)
    ↓Field3 [steps.JsonFieldStep-1673271075121]: 
      value: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: rgb(248, 199, 0)
    ↓Field4 [steps.JsonFieldStep-1673271075124]: 
      value: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: rgb(235, 65, 70)
  ↓arcDelimiters [steps.JsonArrayStep-1673271075127]: 
    key: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
        - SmartType: 
          - ↑mode: PLAIN
          - →→: arcDelimiters
    ↓Field4 [steps.JsonFieldStep-1673271075130]: 
      type: number
      value: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: 20
    ↓Field5 [steps.JsonFieldStep-1673271075133]: 
      type: number
      value: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: 40
    ↓Field6 [steps.JsonFieldStep-1673271075136]: 
      type: number
      value: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: 60
    ↓Field7 [steps.JsonFieldStep-1673271075139]: 
      type: number
      value: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: 80
  ↓rangeLabel [steps.JsonArrayStep-1673271075142]: 
    key: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
        - SmartType: 
          - ↑mode: PLAIN
          - →→: rangeLabel
    ↓Field4 [steps.JsonFieldStep-1673271075145]: 
      value: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: '-20'
    ↓Field5 [steps.JsonFieldStep-1673271075148]: 
      value: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
          - SmartType: 
            - ↑mode: PLAIN
            - →→: 5
  ↓needleStartValue [steps.JsonFieldStep-1673271075151]: 
    isEnabled: false
    key: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
        - SmartType: 
          - ↑mode: PLAIN
          - →→: needleStartValue
    type: number
    value: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
        - SmartType: 
          - ↑mode: PLAIN
          - →→: 20
↓lastTotal [steps.JsonFieldStep-1673272237502]: 
  key: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
      - SmartType: 
        - ↑mode: PLAIN
        - →→: lastTotal
  type: number
  value: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
      - SmartType: 
        - ↑mode: JS
        - →→: conso_total_last_year
↓lastTotal1 [steps.JsonFieldStep-1673272278694]: 
  key: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
      - SmartType: 
        - ↑mode: PLAIN
        - →→: currentTotal
  type: number
  value: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.steps.SmartType
      - SmartType: 
        - ↑mode: JS
        - →→: conso_total_current_year
↓date_start [variables.RequestableVariable-1673271075154]: 
  description: date_start
↓date_end [variables.RequestableVariable-1673271075157]: 
  description: date_end
↓sites [variables.RequestableVariable-1673271075160]: 
↓agg_function [variables.RequestableVariable-1673271075163]: 
↓chartType [variables.RequestableVariable-1673271075166]: 
↓multisiteBarChart [core.TestCase]: 
  ↓date_start [variables.TestCaseVariable-1673271075170]: 
    description: date_start
    value: 2021-01-01
  ↓date_end [variables.TestCaseVariable-1673271075173]: 
    description: date_end
    value: 2022-12-01
  ↓sites [variables.TestCaseVariable-1673271075176]: 
    value: '[7991, 7626]'
  ↓agg_function [variables.TestCaseVariable-1673271075179]: 
    value: month
  ↓chartType [variables.TestCaseVariable-1673271075182]: 
    value: bar
↓multisiteGauge [core.TestCase]: 
  ↓date_start [variables.TestCaseVariable-1673271075186]: 
    description: date_start
    value: 2021-01-01
  ↓date_end [variables.TestCaseVariable-1673271075189]: 
    description: date_end
    value: 2022-12-01
  ↓sites [variables.TestCaseVariable-1673271075192]: 
    value: '[7991, 7626]'
  ↓agg_function [variables.TestCaseVariable-1673271075195]: 
    value: month
  ↓chartType [variables.TestCaseVariable-1673271075198]: 
    value: gauge